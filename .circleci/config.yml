version: 2.1
jobs:
  build:
    docker:
      - image: cimg/node:14.0.0
      - image: circleci/mysql:5.7
        command: --default-authentication-plugin=mysql_native_password
        environment:
            MYSQL_ROOT_PASSWORD: password
            MYSQL_DATABASE: test
            MYSQL_USER: user
            MYSQL_PASSWORD: password
            MYSQL_HOST: '127.0.0.1'
            MYSQL_PORT: '3306'
            
    steps:
      - checkout
      - run: npm install
      - run: apt-get update && apt-get install -y mysql-client 
      - run: node --version
     
workflows:
  build_and_test:
    jobs:
      - build 
